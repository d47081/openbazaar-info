var Listing={other:{page:1,total:0,lock:false,load:function(a,e,d,c,f,b){if((b||Listing.other.total==0)&&Listing.other.lock==false){$.ajax({url:"api/profile/listings",type:"GET",data:{peerId:a,page:Listing.other.page,},beforeSend:function(){Listing.other.lock=true;$(c).addClass("disabled")},success:function(g){if(g.success){$(f).addClass("d-none");Listing.other.page++;if(g.listings.length){$(g.listings).each(function(){Listing.other.total++;if(e!=this.hash){if(this.nsfw.status){$(d).append($("<div/>",{"class":"result mt-2 mb-2 pt-2 pb-2 pl-3 pr-3",}).append($("<div/>",{"class":"text-center border rounded pt-2 pb-3 pl-2 pr-2",}).append($("<i/>",{"class":"material-icons text-secondary"}).append("visibility_off")).append($("<div/>",{"class":"text-secondary text-uppercase pt-2 pb-1"}).append(this.nsfw.text)).append($("<code/>",{"class":"text-secondary"}).append(this.hash))))}else{var h;if(this.image){h=$("<div/>",{"class":"col-2 pr-0",}).append($("<a/>",{href:"listing/"+this.hash,}).append($("<img/>",{"class":"w-100 mt-1 rounded",alt:this.image,src:"api/image?hash="+this.image})))}$(d).append($("<div/>",{"class":"result rounded mt-2 mb-2 pt-2 pb-2 pl-3 pr-3",}).append($("<div/>",{"class":"row",}).append(h).append($("<div/>",{"class":"col-8",}).append($("<a/>",{href:"listing/"+this.hash,}).append($("<h6/>").append(this.title))).append($("<div/>",{"class":"description "+(!this.available?"text-secondary":"")}).append(this.description))).append($("<div/>",{"class":"col-2 text-center pl-0 pr-0",}).append($("<div/>",{"class":"text-success",}).append(this.price)).append($("<div/>",{"class":"text-uppercase",}).append($("<small/>").append(this.condition))).append($("<div/>",{"class":"text-muted",}).append($("<small/>").append(this.contractType))).append($("<a/>",{"class":"badge mt-2 pt-1 pb-1 pl-2 pr-2 "+(this.payment.security=="danger"?"badge-danger":(this.payment.security=="moderated"?"badge-primary":"badge-success")),href:"ob://"+this.peerId+"/store/"+this.slug,title:this.payment.text}).append(this.payment.security=="danger"?$("<i/>",{"class":"material-icons mr-1"}).append("warning"):(this.payment.security=="moderated"?$("<i/>",{"class":"material-icons mr-1"}).append("security"):"")).append("Buy")))))}}})}else{$(d).html($("<div/>",{"class":"mt-5 mb-5 text-center",}).append(g.message))}if(Listing.other.total<g.total){$(c).removeClass("d-none");$(c).removeClass("disabled")}else{$(c).addClass("d-none");$(c).addClass("disabled")}Listing.other.lock=false}}})}}},shippings:{page:1,total:0,lock:false,load:function(d,c,b,e,a){if(a){$(c).html("");$(e).removeClass("d-none");$(b).addClass("d-none");$(b).addClass("disabled");Listing.shippings.page=1}if((a||Listing.shippings.total==0)&&Listing.shippings.lock==false){$.ajax({url:"api/listing/shippings",type:"GET",data:{hash:d,page:Listing.shippings.page,},beforeSend:function(){Listing.shippings.lock=true;$(b).addClass("disabled")},success:function(f){if(f.success){$(e).addClass("d-none");Listing.shippings.page++;if(f.total>0){$(f.shippings).each(function(){Listing.shippings.total++;var h=0;var j=$("<table/>",{"class":"table table-bordered mt-3 mb-2"});$(this.services).each(function(){h++;$(j).append($("<tr/>").append($("<td/>").append(this.name)).append($("<td/>").append(this.estimatedDelivery)).append($("<td/>",{"class":"text-center"}).append(this.price)).append($("<td/>",{"class":"text-center"}).append(this.additionalItemPrice)))});var i=0;var g=$("<div/>",{"class":"countries"});$(this.countries).each(function(){i++;if(this.flag){g.append($("<img/>",{alt:"",title:this.name,src:this.flag,"class":"flag shadow-sm mr-1"}))}else{g.append($("<span/>",{"class":"mr-1"}).append(this.name))}});$(c).append($("<div/>",{"class":"result rounded mt-2 mb-2 pt-2 pb-2 pl-3 pr-3"}).append($("<strong/>").append(this.name)).append($("<div/>",{"class":"text-secondary"}).append("<small>"+this.type+"</small>")).append(i>0?g:"").append(h>0?j:""))})}else{$(c).html($("<div/>",{"class":"mt-5 mb-5 text-center",}).append(f.message))}if(Listing.shippings.total<f.total){$(b).removeClass("d-none");$(b).removeClass("disabled")}else{$(b).addClass("d-none");$(b).addClass("disabled")}Listing.shippings.lock=false}}})}}},moderators:{page:1,total:0,lock:false,load:function(d,c,b,e,a){if(a){$(c).html("");$(e).removeClass("d-none");$(b).addClass("d-none");$(b).addClass("disabled");Listing.moderators.page=1}if((a||Listing.moderators.total==0)&&Listing.moderators.lock==false){$.ajax({url:"api/listing/moderators",type:"GET",data:{hash:d,page:Listing.moderators.page,},beforeSend:function(){Listing.moderators.lock=true;$(b).addClass("disabled")},success:function(f){if(f.success){$(e).addClass("d-none");Listing.moderators.page++;if(f.moderators.length){$(f.moderators).each(function(){Listing.moderators.total++;if(this.nsfw.status){$(c).append($("<div/>",{"class":"result mt-2 mb-2 pt-2 pb-2 pl-3 pr-3",}).append($("<div/>",{"class":"text-center border rounded pt-2 pb-3 pl-2 pr-2",}).append($("<i/>",{"class":"material-icons text-secondary"}).append("visibility_off")).append($("<div/>",{"class":"text-secondary text-uppercase pt-2 pb-1"}).append(this.nsfw.text)).append($("<code/>",{"class":"text-secondary"}).append(this.peerId))))}else{$(c).append($("<div/>",{"class":"result rounded position-relative mt-2 mb-2 pt-2 pb-2 pl-3 pr-3",}).append($("<div/>",{"class":"row",}).append($("<div/>",{"class":"col-2 pr-0",}).append($("<a/>",{href:"profile/"+this.peerId,}).append($("<img/>",{"class":"w-100 mt-1 rounded",alt:this.avatar,src:"api/image?hash="+this.avatar})))).append($("<div/>",{"class":"col-8",}).append($("<a/>",{href:"profile/"+this.peerId,}).append($("<h6/>").append(this.name))).append($("<div/>",{"class":"description "+(!this.available?"text-secondary":"")}).append(this.shortDescription)).append($("<div/>").append($("<i/>",{"class":"material-icons online mr-1 "+(this.online.status=="online"?"text-success":this.online.status=="active"?"text-warning":"text-danger"),title:this.online.text}).append("lens")).append($("<small/>",{"class":"mr-1 d-lg-none d-xl-none "+(this.online.status=="online"?"text-success":this.online.status=="active"?"text-warning":"text-danger")}).append(this.online.text)).append($("<code/>",{"class":"text-secondary"}).append(this.peerId)))).append($("<div/>",{"class":"col-2 pt-3 pb-3 text-center",}).append($("<div/>",{"class":"text-primary",}).append(this.price)).append($("<small/>",{"class":"text-secondary",}).append(this.feeType)))))}})}else{$(c).html($("<div/>",{"class":"mt-5 mb-5 text-center",}).append(f.message))}if(Listing.moderators.total<f.total){$(b).removeClass("d-none");$(b).removeClass("disabled")}else{$(b).addClass("d-none");$(b).addClass("disabled")}Listing.moderators.lock=false}}})}}},};$(document).ready(function(){Listing.other.load($("#listingOtherContainer").data("peer-id"),$("#listingOtherContainer").data("hash"),"#listingOtherData","#listingOtherLoad","#listingOtherLoading",false)});
